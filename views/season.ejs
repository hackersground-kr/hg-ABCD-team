<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/all_page.css">
    <link rel="stylesheet" href="/css/nav.css">
    <title>우리동네</title>
</head>
<body>
    <header>
        <!-- 162 -->
        <nav>
            <ul>
                <li><img src="./img/main_icon/main_icon.png" alt="메인 페이지" id="main_img"></li>
                <li>
                    <h1 id="main_h1">우리동네</h1>
                </li>
                <li>
                    <form id="search_input">
                        <input type="text" placeholder="우리동네 최저가 상품 검색하기">
                        <img id="search_img" src="./img/icon/search.png" alt="">
                    </form>
                </li>
                <li id="home_icon_li">
                    <img src="./img/icon/home.png" alt="" id="home_icon">
                </li>
                <li><a href="/" id="home"><p>홈</p></a></li>
                <li>
                    <img id="search_menu_icon" src="./img/icon/search_menu_icon.png" alt="">
                </li>
                <li>
                    <a href="/season">제철상품 찾기</a>
                </li>
                <li id="logout_icon_li">
                    <img src="./img/icon/logout.png" alt="" id="logout_icon">
                </li>
                <li>
                    <% if (name) { %>
                        <a href="/logout" id="logout">
                            <p>로그아웃</p>
                        </a>
                    <% } else { %>
                        <a href="/login" id="logout">
                            <p>로그인</p>
                        </a>
                    <% } %>
                </li>
                <li id="user_icon">
                    <a href=""><img src="./img/icon/user_icon.png" alt=""></a>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <h1 style="text-align: center; margin-top: 130px;">오늘의 제철 상품</h1>
        <div id="cards" style="justify-content: center;">
            <% for(let i = 0; i < 1; i++) { %>
                <div class="card">
                    <!-- <img src="./img/slide_img1.png" alt=""> -->
                    <div></div>
                    <p>제목: <%= post[i].title %></p>
                    <p>가격: <%= post[i].price %></p>
                    <p>설명: <%= post[i].content %></p>
                    <p id="post_id">게시글 아이디: <%= post[i].id %></p>
                </div>
            <% } %>
        </div>
    </main>

    <footer>
        <hr>
        <div id="foot_in">
            <p>프론트 : <span>강백호 김은찬</span></p>
            <p>백엔드 : <span>권재현</span></p>
            <p>배포 : <span>최인규</span></p>
            <p>주소 <span>경상북도 의성군 봉양면 봉호로 14</span></p>
            <p>고객문의: <span>kec4489@naver.com</span></p>
        </div>
        <h1 style="text-align: center;">Uri Dong-ne</h1>
    </footer>    
</body>
    <script src="/js/all.js"></script>
    <script>
        const cards = document.querySelectorAll('.card');
    
        cards.forEach(card => {
            card.addEventListener('click', function() {
                const idElement = card.querySelector('#post_id');
                if (idElement) {
                    // 숫자만 추출하기 위해 정규 표현식을 사용합니다.
                    const postId = idElement.innerText.match(/\d+/)[0];
                    window.location.href = `/post/${postId}`;
                } 
            });
        });
    </script>
</html>